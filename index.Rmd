---
title: "Tidy data structures and visualisation <br> to support exploration and modeling of temporal-context data"
type: "seminar"
author: "Earo Wang"
date: "Mar 14, 2018 <br> slides at <http://slides.earo.me/phd18>"
output:
  xaringan::moon_reader:
    css: ["default", "myremark.css", "timeline.css"]
    self_contained: false
    nature:
      highlightStyle: github
      highlightLines: true
      countIncrementalSlides: false
---

```{r initial, echo = FALSE, cache = FALSE, results = 'hide'}
library(knitr)
options(htmltools.dir.version = FALSE, tibble.width = 60)
opts_chunk$set(
  echo = FALSE, warning = FALSE, message = FALSE, comment = "#>",
  fig.path = 'figure/', cache.path = 'cache/', fig.align = 'center', 
  fig.width = 12, fig.height = 11, fig.show = 'hold', 
  cache = TRUE, external = TRUE, dev = 'svglite'
)
read_chunk('src/code.R')
```

```{r load-pkgs}
```


class: middle

## Agenda

* **WIP**: Tidy data structures to support exploration and modeling of temporal-context data
* **Done**: Calendar-based graphics for visualising people’s daily schedules
* **ToDo**: Visualisation of time series with nested and crossed factors

---

background-image: url(figure/map-airlines-1.svg)
background-size: cover

class: bottom center

```{r map-airlines, fig.width = 13, eval = FALSE}
```

# USA airline traffic in 2016 & 2017

*data source: [Bureau of Transportation Statistics](https://www.transtats.bts.gov/DL_SelectFields.asp?Table_ID=236)*

---

background-image: url(img/data-snapshot.png)
background-size: cover

class: inverse bottom center

# Data snapshot

---

.pull-left[
* heterogeneous data types
* multiple measured variables
]
.pull-right[
* fine time scale
* multiple grouping variables
]
.center[<img src="img/data-snapshot.png" height=440px>]

---

## However ...

The current structure that underlies the time series objects:

\begin{equation}
  \begin{bmatrix}
  X_{11} & X_{21} & \cdots & X_{p1} \\
  X_{12} & X_{22} & \cdots & X_{p2} \\
  \vdots & \vdots & \ddots & \vdots \\
  X_{1T} & X_{2T} & \cdots & X_{pT}
  \end{bmatrix}
\end{equation}

where $X_{jt}$ represents series $j$, for $j = 1, \dots, p$ and $1 \leq t \leq T$, in the form of a $T \times p$ matrix.

--

It requires

* homogeneity (numerical variables)
* implicitly inferred time indices

--

This matrix format is **model-centric**.

---

## Force the fitting of a square peg into a round hole.

* heterogeneous data types
* explicitly declared index variable
* syntax to describe nested or crossed factors
* pipeline analysis

---

class: inverse middle center

.scale-up[<img src="img/tsibble.svg" height=200px size=50%>]

## Chinglish for time series tibble

---

class: inverse middle center

<img src="img/tsibble.svg" height=200px size=50%>

## ~~Chinglish for time series tibble~~
## The future of time series in R

---

.left-column[
## Tidy temporal data
### - definition
]
.right-column[
.large[Tidy data principles:]
* Each variable forms a column.
* Each observation forms a row.
* Each type of observational unit forms a table.

Make a table
]

---

.left-column[
## Tidy temporal data
### - definition
]
.right-column[
.large[Tidy temporal data:]
* **index**: an explicitly declared variable containing time indices.
* **key**: uniquely identifies each unit that measurements take place on over time.
* **interval**: a common time interval if data with regular time interval.

Make a table
]

---

.left-column[
## Tidy temporal data
### - definition
### - index
]
.right-column[
]

---

.left-column[
## Tidy temporal data
### - definition
### - index
### - key
]
.right-column[
]

---

.left-column[
## Tidy temporal data
### - definition
### - index
### - key
### - verb+noun
]
.right-column[
]

---



## 

---

.flowchart[`filter()` ojfeojfo j fejfoeojfw ojfowjf]
.flowchart[`filter()` ojfeojfo j fejfoeojfw ojfowjf]

---

.left-column[
## Timeline
### - Done
]
.right-column[
.timeline.timeline-left.timeline-with-arrows[
.timeline-block[
.arrow-right[
.timeline-content[
[**Tidy data and statistical visualisation to support exploration of temporal data with R**](http://slides.earo.me/medascin17/) <br>
Workshop @ Data Science Week, Melbourne
.timeline-date[
2017/05
]]]]
.timeline-block[
.arrow-right[
.timeline-content[
[**Sketch people’s daily schedules**](http://slides.earo.me/wombat17/) <br>
Lightning @ Wombat, Melbourne
.timeline-date[
2017/05
]]]]

.timeline-block[
.arrow-right[
.timeline-content[
`sugrrants` v0.1.0 CRAN release
.timeline-date[
2017/07
]]]]

.timeline-block[
.arrow-right[
.timeline-content[
[**Calendar-based graphics for visualizing people’s daily schedules**](http://pub.earo.me/calendar-vis.pdf) submitted to JSS
.timeline-date[
2017/08
]]]]

.timeline-block[
.arrow-right[
.timeline-content[
[**Analysing sub-daily time series data**](http://slides.earo.me/meetup17/) <br>
Invited talk @ MelbURN, Melbourne
.timeline-date[
2017/10
]]]]
]
]

---

.left-column[
## Timeline
### - Done
]
.right-column[
.timeline.timeline-left.timeline-with-arrows[
.timeline-block[
.arrow-right[
.timeline-content[
[**Calendar-based graphics for visualizing people’s daily schedules**](http://slides.earo.me/iasc17/) <br>
Contributed talk @ IASC, Auckland
.timeline-date[
2017/12
]]]]

.timeline-block[
.arrow-right[
.timeline-content[
`tsibble` v0.1.0 CRAN release
.timeline-date[
2018/01
]]]]
.timeline-block[
.arrow-right[
.timeline-content[
**Calendar-based graphics for visualizing people’s daily schedules**
won 2018 ASA Statistical Graphics Student Paper Award
.timeline-date[
2018/01
]]]]

.timeline-block[
.arrow-right[
.timeline-content[
[**When time series meets tibble, it’s tsibble!**](http://slides.earo.me/rstudioconf18/tsibble.pdf)
Poster @ rstudio::conf, San Diego
.timeline-date[
2018/01
]]]]
]
]

---

.left-column[
## Timeline
### - Done
### - ToDo
]
.right-column[
.timeline.timeline-left.timeline-with-arrows[
.timeline-block[
.arrow-right[
.timeline-content[
Academic visit @ Paris & Brussels
.timeline-date[
2018/04
]]]]
.timeline-block[
.arrow-right[
.timeline-content[
**Tidy data structures to support exploration and modeling of temporal-context data**
submitted JCGS
.timeline-date[
2018/07
]]]]

.timeline-block[
.arrow-right[
.timeline-content[
**Tidy data structures to support exploration and modeling of temporal-context data** <br>
Contributed talk @ UseR!2018, Brisbane
.timeline-date[
2018/07
]]]]

.timeline-block[
.arrow-right[
.timeline-content[
**Calendar-based graphics for visualizing people’s daily schedules** <br>
Contributed talk @ JSM, Vancouver
.timeline-date[
2018/08
]]]]
]
]

---


.left-column[
## Timeline
### - Done
### - ToDo
]
.right-column[
.timeline.timeline-left.timeline-with-arrows[
.timeline-block[
.arrow-right[
.timeline-content[
**Tidy data structures to support exploration and modeling of temporal-context data** <br>
Contributed talk @ ISCB, Melbourne
.timeline-date[
2018/08
]]]]

.timeline-block[
.arrow-right[
.timeline-content[
**Visualisation of time series with nested and crossed factors**
.timeline-date[
2019/03
]]]]

.timeline-block[
.arrow-right[
.timeline-content[
Thesis `r emo::ji("v")`
.timeline-date[
2019/06
]]]]
]
]

---

class: inverse middle center

### made with [`r icon::fa("heart")`]() and .orange[`r icon::fa("coffee")`]
### xaringan `r emo::ji("crossed_swords")` slides <http://slides.earo.me/phd18>
### reproducible & open source <https://github.com/earowang/phd18>
### This work is under licensed [CC BY-NC 4.0](https://creativecommons.org/licenses/by-nc/4.0/).
